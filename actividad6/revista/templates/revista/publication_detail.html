{% extends 'revista/base.html' %}
{% block title %}{{ publication.title }}{% endblock %}
{% block content %}
<div class="mb-3">
  <h1>{{ publication.title }}</h1>
  <p class="text-muted mb-1">
    <strong>Publicador:</strong> {{ publication.publisher }} â€”
    <strong>Autorizador:</strong> {{ publication.authorizer|default:"(Sin autorizar)" }}
  </p>
  <p class="text-muted">
    <strong>Estado:</strong> {{ publication.get_status_display }} |
    <strong>Publicado:</strong> {% if publication.published_at %}{{ publication.published_at|date:"Y-m-d H:i" }}{% else %}No publicado{% endif %}
  </p>
</div>

<div class="card mb-3">
  <div class="card-body">
    {{ publication.content|linebreaks }}
  </div>
</div>

<div class="mb-3">
  <a class="btn btn-secondary me-2" href="{% url 'revista:publication_list' %}">Volver al listado</a>
  <a class="btn btn-warning" href="{% url 'revista:publication_edit' publication.pk %}">Editar</a>
</div>

<!-- Comentarios (si existen) -->
{% if publication.comments.all %}
  <h5>Comentarios</h5>
  <ul class="list-group mb-3">
    {% for comment in publication.comments.all %}
      <li class="list-group-item">
        <strong>{{ comment.commenter_name }}</strong> <small class="text-muted">- {{ comment.created_at|date:"Y-m-d H:i" }}</small>
        <div>{{ comment.text|linebreaks }}</div>
      </li>
    {% endfor %}
  </ul>
{% endif %}
{% endblock %}